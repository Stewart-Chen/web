/* --- 讓有 .dock 的頁面都預留底部空間（桌機 & 手機通用） --- */
.has-dock::after,
body:has(.dock)::after{
  content:"";
  display:block;
  height: 88px; /* 桌機預留高度：依你的 dock 實際高度可微調 72~96px */
}

/* ---------- 浮動送出列（原設定） ---------- */
.dock{
  position:fixed;
  left:0; right:0;
  bottom:max(16px, env(safe-area-inset-bottom));
  padding-bottom:env(safe-area-inset-bottom);
  z-index:20;
  display:flex; justify-content:center;
  pointer-events:none;
}
.dock-inner{
  pointer-events:auto;
  background:#ffffffd9; backdrop-filter: blur(8px);
  border:1px solid #e5effa; border-radius:14px; box-shadow:var(--shadow);
  padding:10px; width:min(920px, calc(100% - 24px));
  display:flex; align-items:center; justify-content:space-between; gap:10px;
}
.dock small{ color:var(--muted); }

/* ---------- 手機修正（≤720px） ---------- */
@media (max-width:720px){
  /* 手機用更高的 spacer（含 safe area） */
  .has-dock::after,
  body:has(.dock)::after{
    height: max(120px, calc(104px + env(safe-area-inset-bottom)));
  }
  .dock{
    z-index: 950;           /* 比 .bottom-nav 高 */
    bottom: calc(var(--bottom-nav-h) + env(safe-area-inset-bottom));
    /* 上面這行：底部距離 = 底部選單高度 + 一點間距 + iOS 安全區 */
  }
  .dock-inner{
    width: calc(100% - 12px);
    padding: 8px;
    border-radius:12px;
    flex-direction: column;
    align-items: stretch;
    gap: 8px;
  }
  #dock-meta{ white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }

  .dock-inner .toolbar{
    flex-wrap: nowrap;
    justify-content: space-between;
    align-items: center;
    gap: 6px;
    width: 100%;
  }
  #dock-status{
    flex: 1 1 auto; min-width: 0;
    white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
    font-size: 12px;
  }
  #dock-back, #dock-reset, #dock-submit{ flex: 0 0 auto; }
}
/* 若你的欄位是 <fieldset class="card"> 或 .group */
fieldset.card,
fieldset.group{
  border: 0 !important;
  padding: 0;
}
/* 只影響有進度條那張卡片 */
.card.flow-sm > .progress { margin-top: 16px; }
.state-result .state-icon{
  width: 100px;
  height: 100px;
  object-fit: contain;    /* 防止變形，保留原比例 */
  display: block;
}
/* 讓 A4 友善一點（可省略） */
@page {
  size: A4;
  margin: 16mm;
}

.legend.flex-between {
  display: flex;
  align-items: center;
  justify-content: space-between;
}
.legend .actions {
  display: flex;
  align-items: center;
  gap: 10px; /* 按鈕間距 */
}
/* 只列印 one-minute 表單 + 放大 textarea */
@media print {
  /* 1) 把不是題目的區塊拿掉（不佔位） */
  header, nav, .site-header, .hero, .breadcrumbs,
  .actions, .control-panel, .bottom-nav, footer {
    display: none !important;
  }

  /* 2) 讓主要容器回到全寬、移除陰影邊框，避免擠版 */
  main, .container, .page, .card {
    width: auto !important;
    margin: 0 !important;
    padding: 0 !important;
    box-shadow: none !important;
    border: 0 !important;
    background: transparent !important;
  }

  /* 3) 保留並正常排版表單（可多頁） */
  #one-minute-form {
    position: static !important;   /* 不要 fixed，才能跨頁 */
    margin: 0 !important;
    padding: 0 !important;
    break-inside: auto;
    page-break-inside: auto;
  }

  /* 4) 避免每一題被切半（你的題目卡片/區塊 class 自行替換） */
  .question, .question-card, .form-group {
    break-inside: avoid;
    page-break-inside: avoid;
    margin-bottom: 12px;
  }
  #ctrl-title,
  .dock,
  .card.flow-sm {
    display: none !important;
  }

  /* 5) 列印時把 textarea 放大，方便手寫/填寫 */
  textarea {
    min-height: 25mm !important;   /* 你可以改成 70–90mm */
    height: 25mm !important;
    line-height: 1.4;
  }

  /* 6) A4 版面 */
  @page { size: A4; margin: 14mm; }
}
