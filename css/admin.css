/* 共用：守門時隱藏、整體間距 */
html[data-guard="checking"] main { visibility: hidden; }
main.page-admin {/* padding-top: 14px; *//* padding-bottom: 32px; */}

/* 兩欄排版 */
.admin-wrap {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 16px;
  margin-top: 12px;
}
.admin-col { min-width: 0; }

/* 卡片外觀 */
.admin-card {
  padding: 16px;
  background: #fff;
  border: 1px solid rgba(0,0,0,.06);
  border-radius: 12px;
  box-shadow: var(--shadow-sm);
}

/* 標頭工具列 */
.admin-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 12px;
  margin-top: 6px;
}
.admin-tools {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
}

/* 表格網格輔助 */
.grid2 { display: grid; grid-template-columns: repeat(2, minmax(220px,1fr)); gap: 12px; }
.grid3 { display: grid; grid-template-columns: repeat(3, minmax(180px,1fr)); gap: 16px; }

/* 字型 / 文字樣式 */
.mono { font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace; }
.wrap { word-break: break-all; }

/* 按鈕特例 */
.btn.copy { padding: 6px 10px; font-size: 12px; }

/* 列表 item（課程 / 單元） */
#admin-courses .item,
#admin-lessons .item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 8px 10px;
  border: 1px solid #e6e6e6;
  border-radius: 8px;
  margin-bottom: 8px;
  background: #fff;
}
#admin-courses,
#admin-lessons {
  max-height: 900px;
  overflow: auto;
}

/* 列表 item（老師清單） */
#teacher-list .item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 8px 10px;
  border: 1px solid #e6e6e6;
  border-radius: 8px;
  margin-bottom: 8px;
  background: #fff;
}
#teacher-list { max-height: 360px; overflow: auto; }

/* RWD：手機單欄 */
@media (max-width: 720px) {
  #admin-courses,
  #admin-lessons {
    max-height: 250px;
  }
  .admin-wrap { grid-template-columns: 1fr; }
}

#ac-gallery figure.card{
  border: 1px solid rgba(0,0,0,.06);
  border-radius: 8px;
  overflow: hidden;
}
#ac-gallery figure.card img{ display:block; }
#ac-gallery figure.card .btn.subtle{
  background: rgba(255,255,255,.9);
  border: 1px solid rgba(0,0,0,.08);
}
#ac-gallery figure.card .btn.subtle:hover{
  background: #fff;
}
/* 課程圖片清單（手機友善） */
#ac-gallery{
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); /* 欄寬下限 140px */
  gap: 12px;
}

/* 每個縮圖卡片 */
#ac-gallery figure.thumb{
  position: relative;
  border: 1px solid rgba(0,0,0,.06);
  border-radius: 12px;
  overflow: hidden;
  background: #fafafa;
  box-shadow: 0 2px 8px rgba(0,0,0,.04);
}

/* 縮圖：用比例，不用固定高度 */
#ac-gallery img.pic{
  display: block;
  width: 100%;
  aspect-ratio: 4 / 3;        /* 你要 16/9 也可以，選一個固定比例 */
  object-fit: cover;
}

/* 檔名 */
#ac-gallery figcaption{
  padding: 6px 8px;
  font-size: 12px;
  color: #555;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* 刪除鈕 */
#ac-gallery .btn-del{
  position: absolute;
  top: 6px;
  right: 6px;
  border: 1px solid rgba(0,0,0,.12);
  background: rgba(255,255,255,.95);
  border-radius: 999px;
  padding: 4px 8px;
  font-size: 12px;
  cursor: pointer;
}
#ac-gallery .btn-del:active{ transform: translateY(1px); }

/* 按鈕列在小螢幕要能換行 */
#admin-course-form .actions-row{
  display:flex; gap:10px; flex-wrap:wrap; align-items:center;
}
/* === Gallery 手機優化 === */
#ac-gallery{
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
  gap: 12px;
}

/* 手機寬度：固定 2 欄，縮圖更大 */
@media (max-width: 720px){
  #ac-gallery{
    grid-template-columns: repeat(2, 1fr) !important;
    gap: 12px;
  }
}

/* 每個縮圖卡片 */
#ac-gallery figure.thumb{
  position: relative;
  border: 1px solid rgba(0,0,0,.06);
  border-radius: 12px;
  overflow: hidden;
  background: #fafafa;
  box-shadow: 0 2px 8px rgba(0,0,0,.04);
  width: 100% !important;      /* 防被其他樣式限縮 */
  max-width: none !important;
}

/* 縮圖：占滿卡片寬度，用比例控制高度（擇一） */
/* 選一：方形縮圖 */
#ac-gallery img.pic{
  display:block;
  width:100% !important;
  height:auto !important;
  aspect-ratio: 1 / 1;         /* 換成 4/3 就是長方形 */
  object-fit: cover;
  max-width:none !important;
}
/* 若你想 4:3：把上一段 aspect-ratio 改成 4 / 3 */

/* 檔名＆刪除鈕大小在手機更易點 */
#ac-gallery figcaption{
  padding: 8px 10px;
  font-size: 13px;
  white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
}
#ac-gallery .btn-del{
  position:absolute; top:6px; right:6px;
  padding: 6px 10px; font-size: 12px;
  border-radius:999px; background: rgba(255,255,255,.95);
  border:1px solid rgba(0,0,0,.12);
}

/* 移除舊的固定高度/寬度影響（保險覆寫） */
#ac-gallery img { height:auto !important; }
#ac-gallery figure, #ac-gallery img { max-width:none !important; }

/* 取消 figure 預設外距，避免被擠出容器 */
#ac-gallery figure { margin: 0 !important; }

/* （保留先前兩欄網格設定） */
#ac-gallery{
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 12px;
  box-sizing: border-box;
}
#ac-gallery figure.thumb{
  position: relative;
  border: 1px solid rgba(0,0,0,.06);
  border-radius: 12px;
  overflow: hidden;
  background: #fafafa;
  box-shadow: 0 2px 8px rgba(0,0,0,.04);
  width: 100%;
}
#ac-gallery img.pic{
  display:block;
  width:100%;
  aspect-ratio: 1 / 1; /* 或 4 / 3 */
  object-fit: cover;
}
.form-grid label{display: block;}

#admin-courses .item .title{font-size: 0.8rem;}
.muted{color: var(--muted);font-size: 0.8rem;}

.item .title-row {
  display: flex;
  align-items: center;
  gap: 6px;              /* 標題與 badge 間距 */
}

.item .title {
  flex: 1;               /* 撐滿剩餘空間 */
  white-space: nowrap;   /* 不換行 */
  overflow: hidden;      /* 超出隱藏 */
  text-overflow: ellipsis; /* 超出顯示 ... */
  max-width: 300px;
}

@media (max-width: 900px){
  .item .title {
    max-width: 200px;
  }
}

@media (max-width: 760px){
  .item .title {
    max-width: 150px;
  }
}

/* 觸發區可點、左右對齊 */
.collapsible-trigger {
  cursor: pointer;
  user-select: none;
  display: flex;
  align-items: center;
  justify-content: space-between;
}

/* 內容：展開/收合。收合時完全不佔空間 */
.collapsible-body.is-collapsed { display: none; }

.collapsible-body { animation: fadeIn .5s ease; }
@keyframes fadeIn { from { opacity: 0 } to { opacity: 1 } }


/* 預設箭頭：朝下 */
.caret {
  display: inline-block;
  width: 0;
  height: 0;
  margin-left: 6px;
  vertical-align: middle;
  border-left: 5px solid transparent;
  border-right: 5px solid transparent;
  border-top: 5px solid #666; /* 顏色可換 */
  transition: transform 0.2s ease;
}

/* 展開時旋轉箭頭 */
[aria-expanded="true"] .caret {
  transform: rotate(180deg); /* 朝上 */
}

#courses-body .admin-tools {
  justify-content: flex-end; /* 靠右對齊 */
}

